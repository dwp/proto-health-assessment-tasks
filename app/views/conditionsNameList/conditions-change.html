{% extends "layouts/prompts-without-sidenav" %}

{% block pageTitle %}
Home – {{serviceName}} – GOV.UK Prototype Kit
{% endblock %}

{% block header %}

{{
  dwpHeader({
      name: "Health Assessment Service",
      serviceHref: '../',
      container: true
  })
}}

{% endblock %}

{% block content_left %}

<style type="text/css">
 .condition-text {
    width: 300%;
    text-wrap: wrap;
  }

  .mentalHealth-text {
    width: 300%;
    text-wrap: wrap;
  }
  .mentalHealth-title {
    width: 140%;
    font-weight: 700;
  } 
  </style>

<!-- <div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">    -->

    <form action="#" method="post" id="auto-redirect">
      <input type="hidden" name="{{ loop.index0 }}"/>
      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="contact-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
            <span class="govuk-caption-xl"></span>
            <h1 class="govuk-fieldset__heading">
              Add a condition or disability
            </h1>
            <div id="passport-issued-hint" class="govuk-hint">
            </div>
          </legend>
    
          <div class="govuk-form-group">
            <label class="govuk-label" for="condition-name-first">
              <b>Condition or disability name</b>
            </label>
            <input class="govuk-input" id="condition-name-first" name="condition-name-first" type="text" value="{{data["condName"]}}">
          </div>
    
          <div class="govuk-form-group">
            <label class="govuk-label" for="condition-start">
              <b>When did the condition or disability start?</b>
            </label>
            <input class="govuk-input" id="condition-start" name="condition-start" type="text" value="{{data["conDate"]}}">
          </div>
    
          <div class="govuk-form-group">
            <label class="govuk-label" for="condition-history">
              <b>Condition history</b>
            </label>
            <div id="condition-history" class="govuk-hint">
              This could include: diagnosis details, symptoms, variability, treatments, specalist inputs, hospital stays
            </div>
            <script>
              function addHeadings(){
                  var titles = document.getElementById("conditionSubHeadings").value;
                  // var bText = \r\rDiagnosis \n\n\nSymptoms \n\n\nVariability \n\n\nTreatments \n\n\nSpecialist inputs \n\n\nHospital stays"; 

                  if (titles == "" || titles.length == 0 || titles == null)
                  {
                    document.getElementById("conditionSubHeadings").value += 'Diagnosis details \n\n\nSymptoms \n\n\nVariability \n\n\nTreatments \n\n\nSpecialist inputs \n\n\nHospital stays';
                  } else {
                    document.getElementById("conditionSubHeadings").value += '\r\rDiagnosis details \n\n\nSymptoms \n\n\nVariability \n\n\nTreatments \n\n\nSpecialist inputs \n\n\nHospital stays';
                  }
              }
            </script>
            <a href="#conditionSubHeading" class="govuk-button govuk-button--secondary" onclick="addHeadings(this.value)">Add subheadings</a>
            {% for condition in data['conditionAdded'] %}
            {% set outerLoopIndex = loop.index0 %}
            {% if outerLoopIndex == data["indexCond"] %}
            <textarea class="govuk-textarea" id="conditionSubHeadings" name="condition-history" rows="20" aria-describedby="condition history">{{ condition.conditionHistory}}</textarea>
            {% endif %}
            {% endfor %}
          </div>

          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" aria-describedby="contact-hint">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                <h1 class="govuk-fieldset__heading">
                  Is this a mental health condition?
                </h1>
              </legend>
              {% if data["mentalHealthQ"] == "Yes" %}
              <div class="govuk-radios" data-module="govuk-radios">
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="mentalHealthYes" name="mentalHealthQ" type="radio" value="Yes" data-aria-controls="side-effect-reveal" {{ checked }}>
                  <label class="govuk-label govuk-radios__label" for="mental-healthYes">
                    Yes
                  </label>
                </div>
                {% for condition in data['conditionAdded'] %}
                  {% set outerLoopIndex = loop.index0 %}
                  {% if outerLoopIndex == data["indexCond"] %}
                <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="side-effect-reveal">
                  <div class="govuk-form-group">
                    <label class="govuk-label" for="sideEffectsDescription">
                      <b>Suicidal thoughts and self harm</b>
                    </label>
                  
                    <textarea class="govuk-textarea" id="mental-health" name="mentalHealthCondition" rows="5">{{ condition.mentalHealth}}</textarea>
                  </div>
                </div>
                {% endif %}
                {% endfor %}
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="mental-healthNo" name="mentalHealthQ" type="radio" value="No">
                  <label class="govuk-label govuk-radios__label" for="mental-healthNo">
                    No
                  </label>
                </div>
              </div>
              </fieldset>
            </div>
              {% elseif data["mentalHealthQ"] == "No" %}
              <div class="govuk-radios" data-module="govuk-radios">
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="mentalHealthYes" name="mentalHealthQ" type="radio" value="Yes" data-aria-controls="side-effect-reveal">
                  <label class="govuk-label govuk-radios__label" for="mental-healthYes">
                    Yes
                  </label>
                </div>
                <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="side-effect-reveal">
                  <div class="govuk-form-group">
                    <label class="govuk-label" for="sideEffectsDescription">
                      <b>Suicidal thoughts and self harm</b>
                    </label>
                  {% for condition in data['conditionAdded'] %}
                  {% set outerLoopIndex = loop.index0 %}
                  {% if outerLoopIndex == data["indexCond"] %}
                    <textarea class="govuk-textarea" id="mental-health" name="mentalHealthCondition" rows="5">{{ condition.mentalHealth}}</textarea>
                  {% endif %}
                  {% endfor %}
                  </div>
                </div>
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="mental-healthNo" name="mentalHealthQ" type="radio" value="No" {{ checked }}>
                  <label class="govuk-label govuk-radios__label" for="mental-healthNo">
                    No
                  </label>
                </div>
              </div>
            </fieldset>
          </div>
          {% elseif data["mentalHealthQ"] == undefined %}
          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="mentalHealthYes" name="mentalHealthQ" type="radio" value="Yes" data-aria-controls="side-effect-reveal">
              <label class="govuk-label govuk-radios__label" for="mental-healthYes">
                Yes
              </label>
            </div>
            <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="side-effect-reveal">
              <div class="govuk-form-group">
                <label class="govuk-label" for="sideEffectsDescription">
                  <b>Suicidal thoughts and self harm</b>
                </label>
              {% for condition in data['conditionAdded'] %}
              {% set outerLoopIndex = loop.index0 %}
              {% if outerLoopIndex == data["indexCond"] %}
                <textarea class="govuk-textarea" id="mental-health" name="mentalHealthCondition" rows="5">{{ condition.mentalHealth}}</textarea>
              {% endif %}
              {% endfor %}
              </div>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="mental-healthNo" name="mentalHealthQ" type="radio" value="No">
              <label class="govuk-label govuk-radios__label" for="mental-healthNo">
                No
              </label>
            </div>
          </div>
        </fieldset>
      </div>
          {% endif %}
        
              <div class="govuk-button-group">
              <button type="submit" class="govuk-button" data-module="govuk-button">
                Save and continue
              </button>
    
              {% if (data['conditionAdded']) %}
              <p><a href="conditions-addAnother">Cancel</a></p>
              {% else %}
              <p><a href="conditions-none">Cancel</a></p>
              {% endif %}
    
             </div>
              
    
          </fieldset>
        </div>
      </form>
      

{% endblock %}
