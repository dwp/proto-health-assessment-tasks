{% extends "layouts/justification-two-layout" %}

{% block pageTitle %}
Home – {{serviceName}} – GOV.UK Prototype Kit
{% endblock %}

{% set containerClasses = "full-width-container" %}
{% block content_left %}

<style type="text/css">
  .govuk-textarea {
    text-align: left;
    display: block;
    white-space: pre-line;
  }

  .removeGroup {
    width: 23%;
  }

  .justify-text {
    width: 300%;
    text-wrap: wrap;
  }

      @media (min-width: 48.0625em) {
.sticky {
        position: sticky;
        top: 10px;
        max-height: 100vh;
        overflow-y: auto;
        margin-bottom: 20px;
}
}

 .border {
      border-left: 3px solid #1d70b8;
      padding-left: 10px;
  }
             
  </style>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds"> 

    <form action="#" method="post" id="auto-redirect">
      <div class="govuk-form-group">
         <fieldset class="govuk-fieldset" aria-describedby="contact-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
            <span class="govuk-caption-xl"></span>
            <h1 class="govuk-fieldset__heading">
              Justifications
            </h1>
            <div id="passport-issued-hint" class="govuk-hint">
            </div>
          </legend>

            <h2 class="govuk-heading-m">Select the activities you want to group</h2>

            <div id="activities-hint" class="govuk-hint">
             You can group activities that have the same justification. Each group must contain at least one activity.
            </div>

          <table class="govuk-table">
         <!-- <caption class="govuk-table__caption govuk-table__caption--m">Dates and amounts</caption> -->
         <thead class="govuk-table__head">

   
    
          {% if data["justificationDCheck"].includes("Preparing food") or data["hiddenActivity"].includes("Preparing food")  %} 
             <input class="govuk-checkboxes__input" id="justicationPF" name="hiddenActivity" type="hidden" value="Preparing food" data-aria-controls="">
              {% set prepFood = 1 %}
  
          {% else %}
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationPF" name="justificationDCheck" type="checkbox" value="Preparing food" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationPF">
                <b>Preparing food</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
            {% if (data['preparingfoodSelect']) %}

                {{data["preparingfoodSelect"]}}
      
            </td>
            <td class="govuk-table__cell">
            {% else %}
            No descriptor selected
             
            </td>
             <td class="govuk-table__cell">

             </td>
              {% endif %}
          </tr>
          {% endif %}
         </thead>
         <tbody class="govuk-table__body">
          {% if data['justificationDCheck'].includes("Taking nutrition") or data["hiddenActivity"].includes("Taking nutrition")  %} 

          <input class="govuk-checkboxes__input" id="justicationTN" name="hiddenActivity" type="hidden" value="Taking nutrition" data-aria-controls="">

          {% else %}
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationTN" name="justificationDCheck" type="checkbox" value="Taking nutrition" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationTN">
                <b>Taking nutrition</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['takingnutritionSelect']) %}
             
               {{data["takingnutritionSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
             No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>
         {% endif %}

          {% if data['justificationDCheck'].includes("Managing therapy") or data["hiddenActivity"].includes("Managing therapy")  %} 

          <input class="govuk-checkboxes__input" id="justicationTN" name="hiddenActivity" type="hidden" value="Managing therapy" data-aria-controls="">

          {% else %}

          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationMT" name="justificationDCheck" type="checkbox" value="Managing therapy" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationMT">
                <b>Managing therapy</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['managingtherapySelect']) %}
             
               {{data["managingtherapySelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
            No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

           {% endif %}

          {% if data['justificationDCheck'].includes("Washing and bathing") or data["hiddenActivity"].includes("Washing and bathing")  %} 

          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Washing and bathing" data-aria-controls="">

          {% else %}
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationWB" name="justificationDCheck" type="checkbox" value="Washing and bathing" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationWB">
                <b>Washing and bathing</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['washingbathingSelect']) %}
             
               {{data["washingbathingSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
               No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

           {% endif %}

          {% if data['justificationDCheck'].includes("Managing toilet needs") or data["hiddenActivity"].includes("Managing toilet needs")  %} 

          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Managing toilet needs" data-aria-controls="">

          {% else %}
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationToiletNeeds" name="justificationDCheck" type="checkbox" value="Managing toilet needs" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationToiletNeeds">
                <b>Managing toilet needs</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['toiletneedsSelect']) %}
             
               {{data["toiletneedsSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
             No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

           {% endif %}

          {% if data['justificationDCheck'].includes("Dressing and undressing") or data["hiddenActivity"].includes("Dressing and undressing")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Dressing and undressing" data-aria-controls="">

          {% else %}

           <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationDressing" name="justificationDCheck" type="checkbox" value="Dressing and undressing" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationDressing">
                <b>Dressing and undressing</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['dressingSelect']) %}
             
               {{data["dressingSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
              No descriptor selected
       
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

               {% endif %}


          {% if data['justificationDCheck'].includes("Communicating verbally") or data["hiddenActivity"].includes("Communicating verbally")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Communicating verbally" data-aria-controls="">

          {% else %}
           <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationCV" name="justificationDCheck" type="checkbox" value="Communicating verbally" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationCV">
                <b>Communicating verbally</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['communicatingverballySelect']) %}
             
               {{data["communicatingverballySelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
             No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>
           {% endif %}

          {% if data['justificationDCheck'].includes("Reading and understanding signs, symbols and words") or data["hiddenActivity"].includes("Reading and understanding signs, symbols and words")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Reading and understanding signs, symbols and words" data-aria-controls="">

          {% else %}

           <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationReading" name="justificationDCheck" type="checkbox" value="Reading and understanding signs, symbols and words" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationReading">
                <b>Reading and understanding signs, symbols and words</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['readingunderstandingSelect']) %}
             
               {{data["readingunderstandingSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
              No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

          {% endif %}

           {% if data['justificationDCheck'].includes("Engaging face to face") or data["hiddenActivity"].includes("Engaging face to face")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Engaging face to face" data-aria-controls="">

          {% else %}
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationFace" name="justificationDCheck" type="checkbox" value="Engaging face to face" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationFace">
                <b>Engaging face to face</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['facetofaceSelect']) %}
             
               {{data["facetofaceSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
              No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>
          {% endif %}

           {% if data['justificationDCheck'].includes("Budgeting") or data["hiddenActivity"].includes("Budgeting")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Budgeting" data-aria-controls="">

          {% else %}

          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationBud" name="justificationDCheck" type="checkbox" value="Budgeting" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationBud">
                <b>Budgeting</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['budgetingSelect']) %}
             
               {{data["budgetingSelect"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
             No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

             {% endif %}

             {% if data['justificationDCheck'].includes("Planning and following journeys") or data["hiddenActivity"].includes("Planning and following journeys")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Planning and following journeys" data-aria-controls="">

          {% else %}

          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationBud" name="justificationDCheck" type="checkbox" value="Planning and following journeys" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationBud">
                <b>Planning and following journeys</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['journeysSelectpbr']) %}
             
               {{data["journeysSelectpbr"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
              No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

             {% endif %}

          {% if data['justificationDCheck'].includes("Moving around") or data["hiddenActivity"].includes("Moving around")  %} 
          <input class="govuk-checkboxes__input" id="justicationWB" name="hiddenActivity" type="hidden" value="Moving around" data-aria-controls="">

          {% else %}

          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <div class="govuk-checkboxes" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="justicationmoving" name="justificationDCheck" type="checkbox" value="Moving around" data-aria-controls="">
                <label class="govuk-label govuk-checkboxes__label" for="justicationmoving">
                <b>Moving around</b>
                </label>
            </div>
          </div>
            </th>
            <td class="govuk-table__cell">
              {% if (data['movingaroundSelectpbr']) %}
             
               {{data["movingaroundSelectpbr"]}} 
            </td>
            <td class="govuk-table__cell">
            {% else %}
              No descriptor selected
            </td>
             <td class="govuk-table__cell">

             </td>
                {% endif %}
          </tr>

             {% endif %}
    
              </tbody>
            </table>

          </fieldset>

          <button type="submit" class="govuk-button" data-module="govuk-button">
            Create group
          </button>

           {% if (data['justificationAdded']) %} 
          <a href="addToGroup" class="govuk-link govuk-button group-btn govuk-button--secondary">Add to exisiting group</a>
         
  
       
            <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-default">
          {% else %} 

          {% endif %} 
          
             {% for justification in data['justificationAdded'] %}
             <input type="hidden" name="radioID" value="{{ loop.index }}"/>
              {% set outerLoopIndex = loop.index0 %}
              <div class="govuk-accordion__section">
              <div class="govuk-accordion__section-header">
                <h2 class="govuk-accordion__section-heading">
                  <span class="govuk-accordion__section-button" id="accordion-default-heading-1">
                 Justification for activity {{ justification.groupName }}
                <a class="govuk-link " href="#" style="float: right; font-size: 1.1875rem; border-left: 1px solid #b1b4b6; padding-left: 10px; margin-left: 10px;">Remove<span class="govuk-visually-hidden"></span></a> 
                <a class="govuk-link" href="#" style="float: right; font-size: 1.1875rem;">Change<span class="govuk-visually-hidden"></span></a>
                  
                  </span>
                </h2>
              </div>
              
              <div id="accordion-default-content-1" class="govuk-accordion__section-content">
                <dl class="govuk-summary-list">
                     {% for activityName in justification.activityName %} 
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        {{ activityName }}
                    </dt>
                    <dd class="govuk-summary-list__value">
                      {% if activityName === "Preparing food" %} 
                        {{data["preparingfoodSelect"]}}
                      {% endif %}
                
                      {% if activityName === "Taking nutrition" %} 
                        {{data["takingnutritionSelect"]}}
                      {% endif %}

                      {% if activityName === "Managing therapy" %} 
                      {{data["managingtherapySelect"]}}
                      {% endif %}

                      {% if activityName === "Washing and bathing" %} 
                      {{data["washingbathingSelect"]}}
                      {% endif %}

                      {% if activityName === "Managing toilet needs" %} 
                      {{data["toiletneedsSelect"]}}
                      {% endif %}

                      {% if activityName === "Dressing and undressing" %} 
                      {{data["dressingSelect"]}}
                      {% endif %}

                        {% if activityName === "Communicating verbally" %} 
                      {{data["communicatingverballySelect"]}}
                      {% endif %}

                      {% if activityName === "Reading and understanding signs, symbols and words" %} 
                      {{data["readingunderstandingSelect"]}}
                      {% endif %}

                      {% if activityName === "Engaging face to face" %} 
                      {{data["facetofaceSelect"]}}
                      {% endif %}

                      {% if activityName === "Budgeting" %} 
                      {{data["budgetingSelect"]}}
                      {% endif %}

                      {% if activityName === "Planning and following journeys" %} 
                      {{data["journeysSelectpbr"]}}
                      {% endif %}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                      <a class="govuk-link" href="#">Remove from group<span class="govuk-visually-hidden"> </span></a>
                    </dd>
                  </div>
                 {% endfor %}
                 <div class="govuk-summary-list__row">
                  <h3 class="govuk-heading-s govuk-!-margin-bottom-4 govuk-!-margin-top-2">Justification</h3>
                   <!-- {% for justify in data['numberOfJustificationAdded'] %} 
                    <pre class="justify-text govuk-body"><p>{{justify.seperateJustifications}}</p></pre>
                   </div>
                 {% endfor %} -->
                  
                </dl>
              </div>
              </div>

             {% endfor %}
            </div>
                 
     

              <br>
              <br>
              <br>
 

         </div>
          <!-- </div> -->
        </form>
        <script>
           const ab = document.querySelectorAll(".group-btn"); // this will make anything redirect-able 
          ab.forEach(link => {
            link.addEventListener("click", function (e) {
              e.preventDefault();
              const formElement = document.getElementById("auto-redirect");
              formElement.action = window.location.href = "?redirect=" + e.target.href;
              formElement.submit();
            });
          });
          </script>
  
    </div> 

    <div class="govuk-grid-column-one-third sticky">
    
     
       
            <nav role="navigation" class="border" aria-labelledby="subsection-title" style="float: right">
              <h2 class="govuk-heading-s" id="subsection-title">
              On this page
            </h2>
              {% for justification in data['justificationAdded'] %}
              <ul class="govuk-list">
                <li>
                  <a href="#consultation" class="govuk-link govuk-link--no-visited-state">Justification for activity {{ justification.groupName }}</a>
                </li>
              </ul>
                {% endfor %}
                 <ul class="govuk-list">
                  <li>
                 <a href="consultation-notes" class="govuk-link" rel="noreferrer noopener" target="_blank">Consultation notes (opens in a new tab)</a>
                    </li>
                 </ul>
            </nav>
          
    
        </div>
    </div>

   </fieldset>
    </div>


      

{% endblock %}
